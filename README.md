## Версии пакетов

| Nodejs   | 22.18.0 |
| -------- | ------- |
| Gulp-cli | 3.1.0   |
| Gulp     | 4.0.2   |
| Npm      | 10.9.3  |
| Nvm      | 1.2.2   |

## Использование

Запуск сборки для разработки.
В таблице указаны возможности сборки, которые меняются в зависимости от потребностей в разработке.

```
gulp
```

По мере развития, возможности сборки будут расширяться, но это не точно.

|                         | HTML | JS  | Images | SVG | CSS |
| ----------------------- | ---- | --- | ------ | --- | --- |
| Сжатие                  |      | ✖️  | ✖️     |     | ✖️  |
| Версии для `css` и `js` | ✖️   |     |        |     |     |
| Sourcemap               |      | ✅   | ✅      |     |     |
| Вспомогательный `html`  |      |     |        | ✅   |     |
| Группировка `@media`    |      |     |        |     | ✖️  |

Запуск сборки для продакшена,  без наблюдателя и сервера.

```
gulp p
```

|                         | HTML | JS  | Images | SVG | CSS |
| ----------------------- | ---- | --- | ------ | --- | --- |
| Сжатие                  |      | ✅   | ✅      |     | ✅   |
| Версии для `css` и `js` | ✅    |     |        |     |     |
| Sourcemap               |      | ✖️  | ✖️     |     |     |
| Вспомогательный `html`  |      |     |        | ✖️  |     |
| Группировка `@media`    |      |     |        |     | ✅   |

Запуск сборки для продакшена,  с наблюдателем и сервером.

```
gulp p --server
```

Создание архива для готового проекта

```
gulp p --zip
```

## Возможности сборки

1. HTML
	- Сборка в один файл из сегментов с помощью `@@include`, [документация](https://github.com/haoxins/gulp-file-include)
	- Указывает версию `css` и `js` файлов в `<link>` и `<script>`, предотвращая кэширование на стороне клиента. Теперь не придётся просить чистить кэш у заказчика после малейших изменений в проекте, [документация](https://github.com/shinate/gulp-version-number/)
	- Обертка `<picture>` для `<img>`: оригинальный формат изображения и `webp`:

```
<picture>
	<source srcset="img/mickey.webp" type="image/webp">
	<img src="img/mickey.png" alt="Test">
</picture>
```

2. CSS
	- Препроцессор SASS
		- Sourcemap
		- Сжатие
	- Свойство @support для webp изображений
	- Группировка @media, избавляемся от дубликатов
	- Префиксы для работы в старых браузерах, [документация]( https://github.com/postcss/autoprefixer#options)
	- Смена имени файла `style.css` на `style.min.css`

3. Изображения
	- Конвертация в `webp`
	- Сжатие `png`, `gif`, `jpg` и `jpeg`

4. Шрифты
	- Конвертация из `otf` в `ttf`
	- Конвертация из `ttf` в `woff` и `woff2`
	- Запись шрифтов в файл `fonts.scss`:

```
@font-face {
	font-family: 'Montserrat';
	font-style: normal;
	font-weight: 900;
	src: local(''),
	url("./dist/fonts//Montserrat-Black.woff2") format("woff2"),
	url("./dist/fonts//Montserrat-Black.woff") format("woff");
	font-display: swap;
}
```

Удаляя `fonts.scss`, плагин начнет формировать список шрифтов
заново, в остальных случаях, запись в файл приостанавливается,
чтобы можно было спокойно редактировать `fonts.scss` без изменений
во время работы gulp.

5. Файлы в папке `files`
	- Перемещение любых файлов в папке `files` в готовую сборку

6. Наблюдатель для `html`, `scss`, `js`, `svg`, `images`. Следит за изменениями в файлах и моментально запускает задачи по обработке документов.

7. Запуск сервера для просмотра изменений в файлах (`html`, `scss`, `js`, `svg`, `images`) . Обновлять страницу при работе совместно с наблюдателем не придётся, всё делается автоматически.

Пока что так.